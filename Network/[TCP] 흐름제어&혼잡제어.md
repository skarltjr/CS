### [TCP] 흐름제어&혼잡제어
#### 1. TCP란
```
- 신뢰성이 보장된 네트워크 통신 방식
```
#### 2. 신뢰성 보장 통신에서 마주칠 수 있는 문제
```
1. 손실 : packet이 전달되는 도중 사라지는 문제
2. 순서 변화 : 순서대로 전달되어야 할 packet의 순서가 뒤바뀌는 문제
3. Congestion : 네트워크가 혼잡
4. Overload : receiver가 감당해야할 데이터가 너무 많은 경우
   - 받는쪽이 처리해야할게 쌓였는데 보내는쪽이 계속 보내면 안된다.
```

#### 3. 흐름제어 및 혼잡제어란?
```
1. 흐름제어
- 앞에서 말한 Overload문제로 
- 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 방법
- Flow Control은 receiver가 받는 packet의 양을 조절하는것
- 기본 개념은 receiver가 sender에게 현재 자신의 상태를 feedback

2. 혼잡제어
- 네트워크가 혼잡한 상태를 해결하기 위해 데이터 전송 속도를 조절
```

#### 4. 흐름제어 과정
- 송신(sender)측에서 데이터 처리 속도가 송신측(receiver)의 데이터 처리 속도보다 빠를 때 문제가 발생한다.
- 수신측에서 제한된 저장용량을 초과하면 이 후 전달되는 데이터는 손실된다.
- 데이터 손실은 재전송으로 이어지고 이는 곧 네트워크 혼잡으로 이어질 수 있다.
- 이를 위해 송신측의 데이터 전송량을 수신측의 상태에 따라 조절할필요가 있다.
- 해결 방법 :
  - 1. Stop and Wait : 매번 전송한 패킷에 대해 응답을 받아야만 그 다음 패킷을 전송하는 방법
  - <img width="256" alt="스크린샷 2022-03-06 오전 11 19 52" src="https://user-images.githubusercontent.com/62214428/156906396-f6895151-0b44-4557-8f6b-65c05c7b591b.png">
  - 2. Go Back N
    - 수신측에서 설정한 위도우 크기만큼 송신측에서 확인응답없이 세그먼트를 전송할 수 있게하여 데이터 흐름을 동적으로 조절
    - 목적 : 전송은 되었지만 ack을 받지 못한 byte의 숫자를 파악하기 위해 사용하는 protocol
    - LastByteSent - LastByteAcked <= ReceivecWindowAdvertised
    - (마지막에 보내진 바이트 - 마지막에 확인된 바이트 <= 남아있는 공간)
  - Go Back N의 동작방식 : 먼저 윈도우에 포함되는 모든!! 패킷을 전송하고, 그 패킷들의 전달이 확인되는대로(ack) 이 윈도우를 옆으로 옮김으로써 다음 패킷 전송
  - <img width="599" alt="스크린샷 2022-03-06 오전 11 27 22" src="https://user-images.githubusercontent.com/62214428/156906549-0dcc7c9b-5894-41b3-b7b2-a1b24aa441fc.png">
  - 2번에 대한 응답이 왔다는것은 3번전까지 잘 받았다는것 / 그러니까 3번부터 보내줘~
  - ★위 그림에서 ack 3은 받았지만(즉 3번전까지는 받았다는걸 확인받은) 만약 마지막에 ack 6을 못받았다면(= 3번부터 6번전까지 못받았다) 
  - Go Back N!!! => 못받은 3번부터 싹 다 다시보내!!!!

  - 3. Selective Repeat
  - 바로 위 Go back N에서는 (0,1,2)까진 받았고 (3,4,5,6 중) 하나라도 받지 못했다면 3번부터 싹 다 다시보낸다.
  - SR은 이와 약간 다르게 (3,4,5,6 중 5번만 못받은 상황)에서 5번만 다시요청 < - >Go Back N은 이때도 3번부터 싹다 다시보낸다 
  - Window : TCP/IP를 사용하는 모든 호스트들은 송신하기 위한 것과 수신하기 위한 2개의 Window를 가지고 있다. 호스트들은 실제 데이터를 보내기 전에 '3 way handshaking'을 통해 수신 호스트의 receive window size에 자신의 send window size를 맞추게 된다.










